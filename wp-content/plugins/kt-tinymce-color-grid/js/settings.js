!function(){var t=/\s*[+-]\d*\.?\d+/,e=function(t,e){var n=Math.pow(10,parseInt(e)||0);return Math.round(t*n)/n},n=function(t,e,n){return Math.max(t,Math.min(e,n))},r=function(t){var e=t._dec.toString(16);t._hex="#000000".substr(0,7-e.length)+e.toUpperCase()},i=function(t){t._dec=t._rgb[0]<<16|t._rgb[1]<<8&65535|t._rgb[2]},s=function(t){var n=t._rgb[0]/255,r=t._rgb[1]/255,i=t._rgb[2]/255,s=Math.min(n,Math.min(r,i)),o=Math.max(n,Math.max(r,i)),a=o+s,c=o-s,h=a/2,u=h>0&&h<1?c/(h<.5?a:2-a):0,l=c>0?o==n?(r-i)/c+(r<i?6:0):o==r?(i-n)/c+2:o==i?(n-r)/c+4:0:0;t._hsl=[e(60*l,2),e(100*u,2),e(100*h,2)]},o=function(t,n,r){return r+=r<0?1:r>1?-1:0,e(255*(6*r<1?t+(n-t)*r*6:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t),2)},a=function(t,e){if(null==e)return!1;switch(t){case"rgb":return n(0,parseInt(e),255);case"h":return(parseFloat(e)%360+360)%360;case"sl":return n(0,parseFloat(e),100);case"hex":var r=e.match(/#([0-9a-f]{6}|[0-9a-f]{3})/i);if(r)return 3==(r=r[1].toUpperCase()).length&&(r=r.replace(/([0-9A-F])/g,"$1$1")),"#"+r}return!1},c=function(t,n){switch(n){case"rgb":i(t),r(t),s(t);break;case"hsl":!function(t){var n=t._hsl[0]/360,r=t._hsl[1]/100,i=t._hsl[2]/100;if(0==r)i=e(255*i),t._rgb=[i,i,i];else{var s=i<.5?i*(1+r):i+r-i*r,a=2*i-s;t._rgb=[o(a,s,n+1/3),o(a,s,n),o(a,s,n-1/3)]}}(t),i(t),r(t);break;case"hex":!function(t){t._dec=parseInt(t._hex.substr(1),16)}(t),function(t){t._rgb=[t._dec>>16,t._dec>>8&255,255&t._dec]}(t),s(t)}t._fn&&t._fn.call(t)},h=["red","green","blue"],u=["hue","saturation","lightness"],l=function(t,e){this._rgb=[0,0,0],this._hsl=[0,0,0],this._hex="#000000",this._dec=0,this._fn=e,this.hex(t)};l.prototype.rgb=function(t){if(null==t)return this._rgb;var e=a("rgb",t[0]),n=a("rgb",t[1]),r=a("rgb",t[2]);return!1===e||!1===n||!1===r?this:(this._rgb[0]==e&&this._rgb[1]==n&&this._rgb[2]==r||(this._rgb=[e,n,r],c(this,"rgb")),this)},l.prototype.hsl=function(t){if(null==t)return this._hsl;var e=a("h",t[0]),n=a("sl",t[1]),r=a("sl",t[2]);return!1===e||!1===n||!1===r?this:(this._hsl[0]==e&&this._hsl[1]==n&&this._hsl[2]==r||(this._hsl=[e,n,r],c(this,"hsl")),this)},l.prototype.hex=function(t){if(null==t)return this._hex;var e=a("hex",t);return e&&this._hex!=e&&(this._hex=e,c(this,"hex")),this};for(var f=0;f<3;f++)l.prototype[h[f]]=function(e){return function(n){if(null==n)return this._rgb[e];var r=n;return"string"==typeof n&&n.match(t)&&(r=this._rgb[e]+parseInt(n)),!1!==(r=a("rgb",r))&&r!=this._rgb[e]&&(this._rgb[e]=r,c(this,"rgb")),this}}(f),l.prototype[u[f]]=function(e){return function(n){if(null==n)return this._hsl[e];var r=n;return"string"==typeof n&&n.match(t)&&(r=this._hsl[e]+parseFloat(n)),!1!==(r=a(0==e?"h":"sl",r))&&this._hsl[e]!=r&&(this._hsl[e]=r,c(this,"hsl")),this}}(f);l.prototype.fn=function(){return this._fn?this._fn.apply(this,arguments):this},l.prototype.toString=function(){return this._hex},window.kt_Color=l}(),function(t){var e=!1,n=function(){var e=this.currentStyle.backgroundImage;"none"!=e&&t(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=crop,src='"+e.substring(5,e.length-2)+"')"})};window.kt_Color_Picker=function(r,i){var s=t(r).html('<div class="color"/><div class="wheel"/><div class="overlay"/><div class="h-marker marker"/><div class="sl-marker marker"/>'),o=t(document),a=s.children(".wheel"),c=s.children(".h-marker"),h=s.children(".sl-marker"),u=s.children(".color"),l=!1,f=new kt_Color("#000000",function(){var t=6.28*this._hsl[0]/360;c.css({left:Math.round(84*Math.sin(t))+97,top:Math.round(84*-Math.cos(t))+97}),h.css({left:97-Math.round(100*(this._hsl[1]/100-.5)),top:97-Math.round(100*(this._hsl[2]/100-.5))}),u.css("backgroundColor",d.hue(f._hsl[0]).hex()),i&&i.call(this)}),d=new kt_Color("#FF0000"),g=function(t){var e=a.offset();return{x:t.pageX-e.left-97,y:t.pageY-e.top-97}},p=function(t){var e=g(t);f.hsl(l?[360*Math.atan2(e.x,-e.y)/6.28,f._hsl[1],f._hsl[2]]:[f._hsl[0],e.x/100*-100+50,e.y/100*-100+50])},_={mousemove:p,mouseup:function(){o.off(_),e=!1}};return String(navigator.appVersion).match(/MSIE [0-6]\./)&&s.children().each(n),s.on("mousedown",function(t){if(1!=t.which)return!1;e||(o.on(_),e=!0);var n=g(t);return l=2*Math.max(Math.abs(n.x),Math.abs(n.y))>100,p(t),!1}),f}}(jQuery),function(t,e){var n=8,r=46,i=13,s=27,o=32,a=33,c=34,h=35,u=36,l=37,f=38,d=39,g=40,p=107,_=187,k=109,v=189,m=1,b=function(t){return document.getElementById(t)};t(function(){var w=t(document),x=t("#kt_picker"),y=null,C=t(),M=kt_Color_Picker(x,function(){if(y){var t=this.hex();y.siblings(".hex").val(t),y.children(".preview").css("backgroundColor",t),T(y)}}),F=function(t){var e=String(t).toUpperCase().match(/^#?([0-9A-F]{6}|[0-9A-F]{3})$/);return!!e&&(3==e[1].length?"#"+e[1].replace(/([0-9A-F])/g,"$1$1"):"#"+e[1])},I=function(){return x.hasClass("hidden")},D=function(){x.attr("aria-hidden","true").addClass("hidden"),w.off("mousedown",S)},S=function(e){t(e.target).closest(y).length||D()},T=function(n){if(e&&b("kt_autoname").checked){var r=t(n).closest(".picker"),i=r.children(".name");if(i.hasClass("autoname")){var s=r.children(".hex").val();i.val(e.name(s)[1])}}},A=function(e,n){return e&&"click"==e.type?t(n).closest(".picker"):C},$=function(t){var e=A(t,this);if(e.prev().length)return e.after(e.prev()),!1},z=function(t){var e=A(t,this);if(e.next().length)return e.before(e.next()),!1},E=function(t){switch(t.which){case a:return $();case c:return z()}if(j(t))switch(t.which){case l:case f:return $();case d:case g:return z()}switch(t.which){case i:return C.children(".color").trigger("focus"),!1;case l:case f:return function(){if(C.prev().length)return C=C.prev().trigger("focus"),!1}();case d:case g:return function(){if(C.next().length)return C=C.next().trigger("focus"),!1}();case h:return C.appendTo(X).trigger("focus"),!1;case u:return C.prependTo(X).trigger("focus"),!1;case n:case r:K();break;case s:C.trigger("blur")}},K=function(){var t=C.next();t.length||(t=C.prev()),C.remove(),t.trigger("focus")},N=function(e){var n=j(e)?5:2.5,r="+"+n,i="-"+n;switch(e.which){case k:case v:return M.hue(i),!1;case p:case _:return M.hue(r),!1;case f:return M.lightness(r),!1;case g:return M.lightness(i),!1;case l:return M.saturation(r),!1;case d:return M.saturation(i),!1;case o:return y.trigger(t.Event("click",{which:1})),!1;case s:return U(y)}},U=function(t){return I()?t.parent().trigger("focus"):D(),!1},j=function(t){return t.ctrlKey||t.shiftKey||t.metaKey},P=t("#kt_visual, #kt_customizer"),Q=t('input[name="kt_type"]'),V=b("kt_type_palette"),X=t("#kt_color_editor"),B=wp.template("kt_list_entry");P.on("change",function(){"kt_visual"==this.id&&!this.checked&&V.checked&&t("#kt_type_default").prop("checked",!0).trigger("change")}),Q.on("change",function(){"palette"==this.value&&(b("kt_visual").checked=!0),t("#kt_customizer").trigger("change")}),t("#kt_clamp, #kt_clamps").on("mousedown",function(){b("kt_spread_odd").checked=!0});var L=b("kt_action_export"),Y=t("#kt_export").children("input");t("#kt_export").on("change",'input[type="checkbox"]',function(){L.disabled=0==Y.filter(":checked").length,window.wpCookies&&window.wpCookies.set("kt_export_"+this.value,this.checked?1:0,1404e4)});var q=b("kt_action");t("#kt_import, #kt_upload").on("change",function(){t("#"+this.id+"_label").addClass("disabled"),q.value=t(this).data("action"),this.form.submit()}),t("#kt_add").on("click",function(e){e.preventDefault(),t(B({hex:"#000000",name:""})).appendTo(X).children(".hex").prop({selectionStart:1,selectionEnd:7}).trigger("focus")}),t("#kt_autoname").on("change",function(){if(X.toggleClass("autoname",this.checked),window.wpCookies){var t=this.checked?1:0;window.wpCookies.set("kt_color_grid_autoname",t,1404e4)}}),X.on("click",".remove",function(e){C=t(this.parentNode),K(),e.preventDefault()}).on("click","button.autoname",function(t){t.preventDefault(),T(this)}).on("mousedown",".picker",function(e){t(e.target).is(".picker")&&t(this).trigger("focus")}).on("focus blur",".picker",function(e){t(e.target).is(".picker")&&("focusin"==e.type?C=t(this).attr("aria-grabbed","true").addClass("grabbed").on("keydown",E):C.attr("aria-grabbed","false").removeClass("grabbed").off("keydown",E))}).on("click",".color",function(e){e.which==m&&(I()?(w.on("mousedown",S),y=t(this),x.attr("aria-hidden","false").removeClass("hidden").position({of:this,at:"left bottom",my:"left top-2px"})):D())}).on("focus blur",".color",function(e){"focusin"==e.type?(y=t(this).on("keydown",N),M.hex(y.siblings(".hex").val()).fn()):(D(),y.off("keydown",N),y=null)}).on("change",".hex",function(){var n=F(this.value),r=t(this).siblings(".name");n?(this.value=n,t(this.parentNode).find(".preview").css("backgroundColor",n),T(this)):e&&r.hasClass("autoname")&&r.val("")}).on("focus blur",".hex",function(e){if("focusin"==e.type){r=t(this),F(this.value)&&r.data("lastValue",this.value);var n=r.data("autoFill");n&&(clearTimeout(n),r.removeData("autoFill"))}else if(!F(this.value)){D();var r;(r=t(this)).data("autoFill",setTimeout(function(){r.val(r.data("lastvalue")),T(this)},5e3))}}).on("click",".sort-up",$).on("click",".sort-down",z).on("keydown","input",function(e){switch(e.which){case s:t(this.parentNode).trigger("focus");break;case i:e.preventDefault()}}).on("keydown",".name",function(t){t.which==i&&(t.preventDefault(),T(this))}).on("change",".name",function(){e&&t(this).toggleClass("autoname",""==this.value)}).sortable({placeholder:"picker-placeholder",items:".picker",delay:t(document.body).hasClass("mobile")?200:0,distance:2,revert:130,stop:function(t,e){e.item.css("zIndex","").trigger("focus")}}),postboxes.add_postbox_toggles(pagenow)})}(jQuery,window.ntc);